# 概要

- 基礎からわかるTCP/IP ネットワーク実験プログラミング（第2版）の 5 章を読んで、調査・検証したり、実装して得た知見をまとめていく。

## scanhost.c に関して

- このプログラムは、ホストスキャンをするプログラムである。

### 実装方針

- イメージとしては、`ping コマンド` である。`ICMP ECHO 要求メッセージ` を活用してホストが稼働しているかを確認する。

- 入力
  - ある範囲の IP アドレス

- 出力
  - IP アドレスが存在するかを確認する

- ICMP のデータを作成 (今回は、送信時間を入れる。)

- ICMP のヘッダを作成

- sendto, recvfrom を呼び出して、応答メッセージがあるかを確認する。

> C 言語では、IP 層以下のヘッダ情報を操作するためには Raw Socket を使う必要がある。
> 「raw ソケット」は、ICMP へのアクセスを提供します。raw ソケットは、ネットワーキングスタックによって直接サポートされない IP ベースのほかのプロトコルへのアクセスも提供します。このタイプのソケットは、通常、データグラム型ですが、実際の特性はプロトコルが提供するインタフェースに依存します。raw ソケットは、ほとんどのアプリケーションには使用されません。raw ソケットは、新しい通信プロトコルの開発をサポートしたり、既存プロトコルの難解な機能にアクセスしたりするために提供されています。raw ソケットを使用できるのは、スーパーユーザープロセスだけです。ソケットタイプは SOCK_RAW です。
> raw ソケットを使うと、新しい IPv4 プロトコルをユーザー空間で 実装できるようになる。 raw ソケットは、`リンクレベルヘッダーを 含まない` raw データグラムの送受信ができる。

### 参考

- [RAW](https://linuxjm.osdn.jp/html/LDP_man-pages/man7/raw.7.html)
- [ソケットの概要](https://docs.oracle.com/cd/E19253-01/819-0392/sockets-42163/index.html)

## scanport_tcp.c に関して

- 特になし。

## scanport_udp.c に関して

-
